<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title>Kulturminner i vassdrags- og energisektoren</title>


		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

        <link href='https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/leaflet/dist/leaflet.css' rel='stylesheet' />
        <link href='https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/bootstrap/dist/css/bootstrap.min.css' rel='stylesheet' />
        <link href='https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/leaflet-sidebar/src/L.Control.Sidebar.css' rel='stylesheet' />
        <link href='https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/leaflet.knreise-markers/dist/leaflet.knreise-markers.css' rel='stylesheet' />
        <link href='https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/leaflet.markercluster/dist/MarkerCluster.css' rel='stylesheet' />
        <link href='https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/leaflet.markercluster/dist/MarkerCluster.Default.css' rel='stylesheet' />
        <link href='https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/Leaflet.Photo/Leaflet.Photo.css' rel='stylesheet' />
        <link href='https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/video.js/dist/video-js/video-js.css' rel='stylesheet' />
        <link href='https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/cilogi-marker/dist/cilogi-marker.css' rel='stylesheet' />
        <link href='https://cdn.rawgit.com/knreise/demonstratorer/master/dist/style.css' rel='stylesheet' />
		
        <meta name="apple-mobile-web-app-capable" content="yes">
		<link rel="apple-touch-icon" href="">

    </head>
    <body>

<div id="sidebar"></div>
<div id="map"></div>



<script type="text/template" id="description_template">
<p class="small">Gjendesheim, V&aring;g&aring; 1935. Foto: Neupert, Herman Christian / Norsk Folkemuseum</p>

<p>Historiske foto fra ulike arkiv og samlinger i hele landet.</p>

<p>Dette kartet viser bilder fra Digitalt museum, Nasjonalbiblioteket, Riksarkivet, Trondheim byarkiv, Oslo byarkiv, Vestfoldmuseene, Fylkesarkivet i Sogn og Fjordane, Arkiv i Nordland og NVE.</p>

</br>
</script>



<script type="text/template" id="list_item_template">
<a href="#" class="list-group-item">
    <div class="media">
        <div class="media-left media-middle">
            <%= marker %>
        </div>
        <div class="media-body">
            <h6><%= title %></h6>
        </div>
    </div>
</a>
</script>


			
			
			
			
<script type="text/template" id="marker_template">
<div class="" style="width: 3px; height: 45px; background-color: <%= color %>; border-radius:4px;">
</div>
</script>


<script type="text/template" id="thumbnail_template">
<img src="<%= thumbnail %>" srcset="<%= thumbnail2x %> 2x" width="80" height="60" class="thumbnail" style="border-color: <%= color %>"/>
</script>


<script type="text/template" id="footer_template">
<ul class="list-unstyled">
<% if (license) { %>
    <li><a href="<%= license %>" class="sidebar-link"><i class="fa fa-external-link-square"></i> Lisens<a/></li>
<% } %>
    <li><a target="_blank" href="<%= link %>" class="sidebar-link"><i class="fa fa-external-link-square"></i> Vis hos <%= provider %><a/></li>
</ul>
</script>


<script type="text/template" id="error_template">
<div class="alert alert-danger alert-dismissible" role="alert">
  <button type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  <strong>Feil!</strong> <span class="content"></span>
</div>
</script>


<script type="text/template" id="message_template">
<div class="alert alert-dismissible" role="alert">
  <button type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  <div class="content"></div>
</div>
</script>


<script type="text/template" id="response_form_template">

<div class="feedback-form">
  <p class="show-more"><i class="fa fa-envelope-o"></i> Tilbakemelding</p>
  <form class="hidden">
    <h4>Tilbakemelding</h4>
    <div class="form-group">
      <label for="form_email">Har du spørsmål eller kommentarer til denne informasjonen eller ønsker du å 
        si fra om feil eller mangler, så kan du gjøre det her:</label>
      <textarea id="form_message" class="form-control" rows="3"></textarea>
    </div>

    <div class="form-group">
      <label for="form_email">Din epost:</label>
      <input type="email" class="form-control" id="form_email">
    </div>
    <button type="submit" class="btn btn-default">Send</button>
  </form>
  <div id="form-success" class="media hidden">
      <button class="close pull-right" aria-label="Close" data-dismiss="alert" type="button">
        <span aria-hidden="true">×</span>
      </button>
      <div class="media-left">
        <i class="fa fa-check-circle fa-3x"></i>
      </div>
      <div class="media-body">
      </div>
  </div>
</div>
</script>


<script type="text/template" id="splashscreen_template">
<h2><%= title %></h2>
<% if (image) { %> 
<img class="splash-image" src="<%= image %>">
<% } %>
<div class="splash-content">
    <% if (description) { %> 
    <div><%= description %></div>
    <% } %>
    <% if (creator) { %> 

        <table class="sidebar-table">
            <tr>
              <td>Laget av</td>
              <td><%= creator %></td>
            </tr>
        </table>

    <% } %>
    
    <% if (spinner) { %>
        <p id="splash_spinner">
            <i class="fa fa-spinner fa-pulse fa-4x"></i>
            Laster data..
        </p>
    <%} %>

    <div class="footer small">
        <p>
            Dette kartet er basert på åpne data og en løsning utviklet i regi av <a href="http://kulturognaturreise.no">Kultur- og naturreise</a>. Se også <a href="http://knreise.no/demonstratorer">andre kart og informasjon om selve løsningen</a>. All koden er fritt tilgjengelig på <a href="https://github.com/knreise/demonstratorer">GitHub</a>.</p>
        <p>
            <input id="persist_splash_cb" type="checkbox"> Ikke vis ved oppstart
        </p>
    </div>
    
</div>
</script>


<script type="text/template" id="user_position_template">
<div class="distance">
    <i class="fa fa-location-arrow" style="transform: rotate(<%= distanceBearing.rot %>deg); -webkit-transform: rotate(<%= distanceBearing.rot %>deg);"></i> 
    <%= distanceBearing.dist %>
</div>
</script>


<script type="text/template" id="flickr_template">
<h3><%= title %></h3>

<img class="fullwidth img-thumbnail" src="<%= image %>" />



<ul class="list-unstyled distance">
    <li>
	    <a href="https://www.flickr.com/photos/<%= owner %>/<%= id %>/"  target="_blank" class="sidebar-link" >
			<i class="fa fa-external-link-square"></i> Vis hos Flickr
		</a>
    </li>
</ul>

</script>


			
				
<script type="text/template" id="popup_template">
<h3><%= title %></h3>

<% if(images) { %>
    <img class="fullwidth img-thumbnail" src="<%= images[0] %>" />
<% } %>
<p><%= content %></p>

</script>



<script type="text/template" id="NVEtp_template">
<h3><%= title %></h3>


<% if(image) { %>
    <img class="fullwidth img-thumbnail" src="<%= image %>" />
<% } %>

<div class="nve-content">
    <%= content %>
</div>
</script>



        <script src="https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/jquery/dist/jquery.min.js" type="text/javascript"></script>
        <script src="https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/underscore/underscore-min.js" type="text/javascript"></script>
        <script src="https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/leaflet/dist/leaflet.js" type="text/javascript"></script>
        <script src="https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/pouchdb/dist/pouchdb.min.js" type="text/javascript"></script>
        <script src="https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/Leaflet.TileLayer.PouchDBCached/L.TileLayer.PouchDBCached.js" type="text/javascript"></script>
        <script src="https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/esri2geo/esri2geo.js" type="text/javascript"></script>
        <script src="https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/KNreiseAPI/dist/KNreiseAPI.min.js" type="text/javascript"></script>
        <script src="https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/leaflet.knreise-markers/dist/leaflet.knreise-markers.min.js" type="text/javascript"></script>
        <script src="https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/leaflet-sidebar/src/L.Control.Sidebar.js" type="text/javascript"></script>
        <script src="https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/leaflet.markercluster/dist/leaflet.markercluster.js" type="text/javascript"></script>
        <script src="https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/turf/turf.min.js" type="text/javascript"></script>
        <script src="https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/togeojson/togeojson.js" type="text/javascript"></script>
        <script src="https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/wellknown/wellknown.js" type="text/javascript"></script>
        <script src="https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/proj4/dist/proj4.js" type="text/javascript"></script>
        <script src="https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/CryptoJS/build/components/core.js" type="text/javascript"></script>
        <script src="https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/CryptoJS/build/components/md5.js" type="text/javascript"></script>
        <script src="https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/audiojs/audiojs/audio.min.js" type="text/javascript"></script>
        <script src="https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/video.js/dist/video-js/video.js" type="text/javascript"></script>
        <script src="https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/jquery-touchswipe/jquery.touchSwipe.js" type="text/javascript"></script>
        <script src="https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/L.TileLayer.Kartverket/dist/L.TileLayer.Kartverket.min.js" type="text/javascript"></script>
        <script src="https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/L.EasyButton/easy-button.js" type="text/javascript"></script>
        <script src="https://cdn.rawgit.com/knreise/demonstratorer/master/bower_components/cilogi-marker/dist/cilogi-marker.min.js" type="text/javascript"></script>
        @*<script src="https://cdn.rawgit.com/knreise/demonstratorer/master/dist/scripts.js" type="text/javascript"></script>*@
        <script src="/scripts/KNreise.js" type="text/javascript"></script>
	
	
        <script type="text/javascript">

            var title = 'Foto';
            var image = '';

		
			
			var randomApi = function (apiName, options) {
				function parse (d) {
				  return JSON.parse(d);
				}
			  
				function getData(dataset, callback, errorCallback, options) {
					var url = dataset.url //KR.Util.addCrossorigin(dataset.url);
					KR.Util.sendRequest(url, parse, callback, errorCallback);
				}
				
				return {
					getData: getData
				};
			};			
		
            (function () {
    'use strict';

    var api = new KR.API({
        flickr: {
            apikey: 'ab1f664476dabf83a289735f97a6d56c'
        }
    });
	api.addApi('custom_geojson', randomApi);

    var kulturminneFunctions = KR.Config.getKulturminneFunctions(api);

    var datasets = [       
	{
		name: 'Dammer',	
		provider: "NVE",
		dataset: {
		  api: 'custom_geojson',
		  url: 'https://www.nve.no/vann-vassdrag-og-miljo/kulturminner/dammer/GeoJsonAPI'
		},
		template: KR.Util.getDatasetTemplate('NVEtp'),
		style: {thumbnail: true, color: '#ff0000', fillcolor: '#ff0000'},
		bbox: false,
		isStatic: true,	
		cluster: true
		},
	{
		name: 'Kraftverk',	
		provider: "NVE",
		dataset: {
		  api: 'custom_geojson',
		  url: 'https://www.nve.no/vann-vassdrag-og-miljo/nves-utvalgte-kulturminner/kraftverk/GeoJsonAPI'
		},
		template: KR.Util.getDatasetTemplate('NVEtp'),
		style: {thumbnail: true, color: '#FF9933', fillcolor: '#FF9933'},
		bbox: false,
		isStatic: true,	
		cluster: true
		},	
	{
		name: 'Kraftledninger',	
		provider: "NVE",
		dataset: {
		  api: 'custom_geojson',
		  url: 'https://www.nve.no/vann-vassdrag-og-miljo/kulturminner/kraftledninger/GeoJsonAPI'
		},
		template: KR.Util.getDatasetTemplate('NVEtp'),
		style: {thumbnail: true, color: '#A0A0A0', fillcolor: '#A0A0A0'},
		bbox: false,
		isStatic: true,	
		cluster: true,
		},	
	{
		name: 'Transformatorstasjoner',	
		provider: "NVE",
		dataset: {
		  api: 'custom_geojson',
		  url: 'https://www.nve.no/vann-vassdrag-og-miljo/kulturminner/transformatorstasjoner/GeoJsonAPI'
		},
		template: KR.Util.getDatasetTemplate('NVEtp'),
		style: {thumbnail: true, color: '#00FF66', fillcolor: '#00FF66'},
		bbox: false,
		isStatic: true,	
		cluster: true
		},			
	{
		name: 'Vassdragstekniske anlegg',	
		provider: "NVE",
		dataset: {
		  api: 'custom_geojson',
		  url: 'https://www.nve.no/vann-vassdrag-og-miljo/kulturminner/vassdragstekniske-anlegg/GeoJsonAPI'
		},
		template: KR.Util.getDatasetTemplate('NVEtp'),
		style: {thumbnail: true, color: '#165075', fillcolor: '#165075'},
		bbox: false,
		isStatic: true,	
		cluster: true
		}/*,	
	{
		name: 'Flickr',
		dataset_name_override: 'NVE flickr',
		provider: 'NVE flickr',
		dataset:  {
			api: 'flickr',
			user_id: 'nve',
			accuracy: 1 // All
		},
		template: KR.Util.getDatasetTemplate('flickr'),
		style: {fillcolor: '#D252B9'},
		bbox: false,
		isStatic: true	
		}*/
    ];

    KR.setupMap(api, datasets, {
		/*title: title,
		image: image, // image: "http://dms01.dimu.org/image/012s7YmtE6EN?dimension=1200x1200",
    	description: $('#description_template').html() //description: "<p>content</p>", */
		
		/*komm: 1622,
		geomFilter: true,
		showGeom: true,*/
		
		bbox: '-4.5703125,56.9449741808516,35.5078125,80.70399666821143', //'-11.25,25.16517336866393,46.40625,82.02137801950887',
		layer: 'europa',
		minZoom: 3,
		maxZoom: 13
    });

    
}());
        </script>
    </body>
</html>
